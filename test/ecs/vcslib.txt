.scope Main
.zeropage
PFColor_pfcolor_b0:
.res 1
.res 1
TEMP:
Local__6__tmp:
.res 1
.code
KernelSection_lines_b0:
.byte 2
.byte 2
.byte 2
.byte 2
.byte 10
.byte 50
.byte 50
.byte 10
BGColor_bgcolor_b0:
.byte 24
.byte 22
.byte 20
.byte 18
.byte 20
.byte 20
.byte 22
.byte 24
Playfield_pf_b0:
.byte 68
.byte 68
.byte 36
.byte 0
Playfield_pf_b8:
.byte 82
.byte 34
.byte 1
.byte 0
Playfield_pf_b16:
.byte 18
.byte 17
.byte 0
.byte 0
Main__INITDATA:
.byte 0
.byte 0
__Start:
.code

;;; start action Init 7 main_init

.include "vcs-ca65.h"
.macpack longbranch
.define PAL 0
__NMI:
__Reset:
__BRK:
    CLEAN_START

    ldy #2
:   lda Main__INITDATA-1,y
    sta PFColor_pfcolor_b0-1,y
    dey
    bne :-
	; initialize data segment
.code

;;; start action FrameLoop 1 start

FrameLoop__start__2__NextFrame:
    FRAME_START
    .code

;;; start action StaticKernel 4 preframe

    .code

;;; start action StaticKernel 4 kernelsetup

    lda #24
    sta COLUBK

;;; end action StaticKernel 4 kernelsetup

;;; start action StaticKernel 4 kernelsetup

;;; end action StaticKernel 4 kernelsetup

;;; start action StaticKernel 4 kernelsetup

;;; end action StaticKernel 4 kernelsetup


;;; end action StaticKernel 4 preframe

    KERNEL_START
    .code

;;; start action StaticKernel 4 kernel

    ldx #0
StaticKernel__kernel__5____each:
    
    sta WSYNC
    .code

;;; start action StaticKernel 4 kernelsetup

    lda BGColor_bgcolor_b0,x
    sta COLUBK

;;; end action StaticKernel 4 kernelsetup

;;; start action StaticKernel 4 kernelsetup

    cpx #5+2
    jcs StaticKernel__kernelsetup__7____skipxhi
    
    cpx #5
    jcc StaticKernel__kernelsetup__7____skipxlo
    
    lda PFColor_pfcolor_b0-5,x
    sta COLUPF

StaticKernel__kernelsetup__7____skipxlo:

StaticKernel__kernelsetup__7____skipxhi:

;;; end action StaticKernel 4 kernelsetup

;;; start action StaticKernel 4 kernelsetup

    cpx #4
    jcc StaticKernel__kernelsetup__8____skipxlo
    
    lda Playfield_pf_b0-4,x
    sta PF0
    lda Playfield_pf_b8-4,x
    sta PF1
    lda Playfield_pf_b16-4,x
    sta PF2

StaticKernel__kernelsetup__8____skipxlo:

;;; end action StaticKernel 4 kernelsetup

    .code

;;; start action StaticKernel 4 kerneldraw

    ldy KernelSection_lines_b0,x
StaticKernel__kerneldraw__9__loop:
    sta WSYNC
    
    dey
    bne StaticKernel__kerneldraw__9__loop

;;; end action StaticKernel 4 kerneldraw

    

    inx
    cpx #8
    jne StaticKernel__kernel__5____each
StaticKernel__kernel__5____exit:

;;; end action StaticKernel 4 kernel

    KERNEL_END
    .code

;;; start action JoyButton 5 postframe

    lda INPT4	;read button input
    bmi JoyButton__postframe__10__NotPressed
    .code

;;; start action Local 6 joybutton

    inc Local__6__tmp+0
    inc PFColor_pfcolor_b0
    
;;; end action Local 6 joybutton

JoyButton__postframe__10__NotPressed:

;;; end action JoyButton 5 postframe

    FRAME_END
    .code

;;; start action ResetSwitch 2 nextframe

    lsr SWCHB	      ; test Game Reset switch
    bcs ResetSwitch__nextframe__12__NoStart
    .code

;;; start action ResetConsole 3 resetswitch

    jmp Main::__Reset ; jump to Reset handler

;;; end action ResetConsole 3 resetswitch

ResetSwitch__nextframe__12__NoStart:

;;; end action ResetSwitch 2 nextframe

    jmp FrameLoop__start__2__NextFrame    ; loop to next frame

;;; end action FrameLoop 1 start
	; start main routine
.segment "VECTORS"
Return:    .word $6060
VecNMI:
VecReset:  .word Main::__Reset
VecBRK:    .word Main::__BRK

;;; end action Init 7 main_init

.endscope
Main__Start = Main::__Start